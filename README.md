*# ğŸ—“ í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €

## ğŸ“š ëª©ì°¨
- [ì†Œê°œ](#-ì†Œê°œ)
- [íƒ€ì„ë¼ì¸](#-íƒ€ì„ë¼ì¸)
- [íŒŒì¼êµ¬ì¡°](#-íŒŒì¼êµ¬ì¡°)
- [ì‹¤í–‰í™”ë©´](#-ì‹¤í–‰í™”ë©´)
- [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
- [ì°¸ê³  ë§í¬](#ì°¸ê³ -ë§í¬)

## ğŸ—£ ì†Œê°œ
### í”„ë¡œì íŠ¸ ì†Œê°œ
#### í”„ë¡œì íŠ¸ ê¸°ê°„ : 23.05.15 ~ 23.06.02
- ToDoë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨

### íŒ€ ì†Œê°œ
- íŒ€ êµ¬ì„±ì›(2ì¸)

| vetto | ì†¡ì¤€ |
| :--------: | :--------: |
| <img src="https://cdn.discordapp.com/attachments/535779947118329866/1055718870951940146/1671110054020-0.jpg" width="200" height="250"/> | <img src="https://user-images.githubusercontent.com/88870642/210026753-591175fe-27c1-4335-a2cb-f883bfeb2784.png" width="200" height="200"/>|
|[Github](https://github.com/gzzjk159)|[Github](https://github.com/kimseongj)|


## â± íƒ€ì„ë¼ì¸
|ë‚ ì§œ|í™œë™|
|---|---|
|2023.05.16|- ê¸°ìˆ  ì„ ì •|
|2023.05.17|- CompositionalLayoutê³¼ DiffableDataSourceë¥¼ ì‚¬ìš©í•˜ì—¬ CollectionView êµ¬í˜„|
|2023.05.18|- CollectionViewì™€ TableViewì— ëŒ€í•œ ë¹„êµ ë° êµ¬í˜„|
|2023.05.19|- CollectionView Swipe êµ¬í˜„|
|2023.05.22|- ModalView êµ¬í˜„ </br> - DateFormmatter ì„¤ì •|
|2023.05.23|- ViewModel êµ¬í˜„ </br> - MVVM Bind êµ¬í˜„|
|2023.05.24|- ViewModel ë¦¬íŒ©í† ë§ </br> - DatePicker êµ¬í˜„|
|2023.05.25|- LongPressGesture êµ¬í˜„ </br> Popover êµ¬í˜„|
|2023.05.26|- ì½”ë“œ ë¦¬íŒ©í† ë§|
|2023.05.29|- Combineì„ í†µí•œ Binding|
|2023.05.30|- Constantê°’ ìƒìˆ˜ ì„ ì–¸ ë° firebase ì‹¤í—˜|
|2023.05.31|- ViewModel ë°ì´í„°ë¥¼ ScheduleManagerë¡œ ë¶„ë¦¬|
|2023.06.01|- MVVM ë¦¬íŒ©í† ë§|
|2023.06.02|- Readme ì‘ì„±|

## ğŸ“‚ íŒŒì¼êµ¬ì¡°
```swift
.
â”œâ”€â”€ Resource
â”‚   â”œâ”€â”€ Assets.xcassets
â”‚   â”‚   â”œâ”€â”€ AccentColor.colorset
â”‚   â”‚   â”‚   â””â”€â”€ Contents.json
â”‚   â”‚   â”œâ”€â”€ AppIcon.appiconset
â”‚   â”‚   â”‚   â””â”€â”€ Contents.json
â”‚   â”‚   â””â”€â”€ Contents.json
â”‚   â”œâ”€â”€ Base.lproj
â”‚   â”‚   â””â”€â”€ LaunchScreen.storyboard
â”‚   â”œâ”€â”€ GoogleService-Info.plist
â”‚   â””â”€â”€ Info.plist
â””â”€â”€ Source
    â”œâ”€â”€ Application
    â”‚   â”œâ”€â”€ AppDelegate.swift
    â”‚   â””â”€â”€ SceneDelegate.swift
    â”œâ”€â”€ Model
    â”‚   â”œâ”€â”€ ModalType.swift
    â”‚   â”œâ”€â”€ Schedule.swift
    â”‚   â”œâ”€â”€ ScheduleManager.swift
    â”‚   â””â”€â”€ ScheduleType.swift
    â”œâ”€â”€ Protocol
    â”‚   â””â”€â”€ IdentifierType.swift
    â”œâ”€â”€ Utility
    â”‚   â”œâ”€â”€ DateFormatterManager.swift
    â”‚   â”œâ”€â”€ FirebaseManager.swift
    â”‚   â”œâ”€â”€ Namespace.swift
    â”‚   â””â”€â”€ Section.swift
    â”œâ”€â”€ View
    â”‚   â”œâ”€â”€ DoList
    â”‚   â”‚   â”œâ”€â”€ DoListViewController.swift
    â”‚   â”‚   â”œâ”€â”€ ScheduleCell.swift
    â”‚   â”‚   â””â”€â”€ TodoHeaderView.swift
    â”‚   â”œâ”€â”€ Main
    â”‚   â”‚   â””â”€â”€ MainViewController.swift
    â”‚   â””â”€â”€ Modal
    â”‚       â””â”€â”€ ModalViewController.swift
    â””â”€â”€ ViewModel
        â”œâ”€â”€ DoListViewModel.swift
        â””â”€â”€ ModalViewModel.swift
```

## ğŸ’» ì‹¤í–‰í™”ë©´

| schedule ìƒì„± | Schedule ì´ë™|
| :--------: | :--------: |
| ![ìŠ¤ì¼€ì¥´ì¶”ê°€](https://github.com/kimseongj/TIL/assets/88870642/d4441bed-0974-4646-ac53-1cbb8cd41ad5)| ![ìŠ¤ì¼€ì¥´ì´ë™](https://github.com/kimseongj/TIL/assets/88870642/61a133d5-a03e-49e4-8553-9dd08982f820)|

| schedule ì‚­ì œ | schedule ìˆ˜ì • |
| :---: | :---: |
|![ìŠ¤ì¼€ì¥´ì‚­ì œ](https://github.com/kimseongj/TIL/assets/88870642/6cb6e98e-f5f5-4dd2-b59a-1290136436bb)|![ìŠ¤ì¼€ì¥´ë³€ê²½](https://github.com/kimseongj/TIL/assets/88870642/f98d8264-0420-43ca-880f-0dab59f8dd53)|


## ğŸ”¥ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1ï¸âƒ£Combine @Publishedì˜ willset
![](https://hackmd.io/uploads/SkehwApSh.png)
> `Published`ì˜ ê²½ìš° ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•œ ê²°ê³¼, subscriberëŠ” ì‹¤ì œë¡œ ì†ì„±ì— ì„¤ì •ë˜ê¸° ì „ì— ìƒˆ ê°’ì„ ë°›ìŠµë‹ˆë‹¤. ì´ ì ì„ ê°„ê³¼í•˜ê³ , ì‹¤ì œ ì†ì„±ì— ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°”ëŒì— í•œë°•ì ëŠ¦ê²Œ ì‘ë™ë˜ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” ê·¸ì— ëŒ€í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ì¦‰, `@Published`ë¡œ ê°ì‹¸ì ¸ìˆëŠ” í”„ë¡œí¼í‹°ëŠ” `sink`í•  ê²½ìš° `willset`ì´ ì‘ë™ë˜ì–´, `weather.temperature`ë¥¼ `sink`ì˜ `escaping closure`ì— ë¶ˆëŸ¬ì˜¬ ê²½ìš° ë³€í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ê°’ì´ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. `sink`ì˜ `escaping closure` ë‚´ë¶€ì— ìˆëŠ” ë§¤ê°œë³€ìˆ˜($0)ì— ë³€í™”ëœ ê°’ì´ ì €ì¥ë˜ë©°, ì´ ê°’ì„ í†µí•´ ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

- ë³€ê²½ëœ ê°’ì„ subscriberê°€ ë°›ì•„ ì™”ì„ ì‹œ
```Swift
class Weather {
    @Published var temperature: [Double]
    init(temperature: [Double]) {
        self.temperature = temperature
    }
}

var cancellables: Set<AnyCancellable> = []

let weather = Weather(temperature: [20])
weather.$temperature
    .sink() { 

        print ("Temperature now: \(weather.temperature)") 

    }.store(in: &cancellables)


weather.temperature = [25] // [20]ì„ í˜¸ì¶œí•œë‹¤.
```

- ì‹¤ì œ ì†ì„± ê°’ì„ ë°›ì•„ì™€ ì²˜ë¦¬ë¥¼ í•˜ì˜€ì„ ì‹œ 
```Swift
class Weather {
    @Published var temperature: [Double]
    init(temperature: [Double]) {
        self.temperature = temperature
    }
}

var cancellables: Set<AnyCancellable> = []

let weather = Weather(temperature: [20])
weather.$temperature
    .sink() { 

        print ("Temperature now: \($0)") 

    }.store(in: &cancellables)


weather.temperature = [25] // [20, 25]ë¥¼ printí•œë‹¤.
```

### 2ï¸âƒ£cell identifier
cellì„ collectionViewì— ë“±ë¡í•  ë•Œ, "cell"ì´ë¼ëŠ” ë‹¤ì†Œ ëª¨í˜¸í•œ identifierë¥¼ ì‘ì„±í–ˆì—ˆìŠµë‹ˆë‹¤. ëª¨í˜¸ì„±ì„ ì—†ì• ê¸° ìœ„í•´ `identifierType`ì´ë¼ëŠ” í”„ë¡œí† ì½œì„ êµ¬í˜„í•˜ì—¬, `UIViewController`ì™€ `UICollectionViewCell`ì— ì±„íƒì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

- ë³€ê²½ ì „
```swift
self.collectionView.register(ScheduleCell.self, forCellWithReuseIdentifier: "cell")
```

- ë³€ê²½ í›„
```swift
public protocol IdentifierType {
    static var identifier: String { get }
}

extension IdentifierType {
    public static var identifier: String {
        return String(describing: self)
    }
}

extension UICollectionViewCell: IdentifierType {}
extension UIViewController: IdentifierType {}

collectionView.register(ScheduleCell.self, forCellWithReuseIdentifier: ScheduleCell.identifier)
```

### 3ï¸âƒ£ë§¤ì§ ë„˜ë²„
ê¸°ì¡´ì—ëŠ” constantê°™ì´ CGFloatê°€ ë“¤ì–´ê°€ëŠ” ìë¦¬ì— 20, 25ë“±ì„ ì§ì ‘ ì ì–´ì£¼ë©° ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ ë˜ë©´ 20, 25ê°™ì€ ë§¤ì§ ë„˜ë²„ê°€ ìƒê²¨ë²„ë¦°ë‹¤. ë§¤ì§ ë„˜ë²„ë¥¼ í•´ê²°í•´ì£¼ê¸° ìœ„í•´ íŒŒì¼ ë‚´ë¶€ì— private let ìœ¼ë¡œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ë„£ì–´ì£¼ëŠ” ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

- ìˆ˜ì • ì „
```swift
private func configureUI() {
    contentView.backgroundColor = .white
        
    contentView.addSubview(stackView)
    stackView.addArrangedSubview(titleLabel)
    stackView.addArrangedSubview(contentLabel)
    stackView.addArrangedSubview(expirationLabel)
        
    NSLayoutConstraint.activate([
        stackView.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: 15),
        stackView.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: -15),
        stackView.topAnchor.constraint(equalTo: contentView.topAnchor, constant: 15),
        stackView.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: -15)
    ])
}
```

- ìˆ˜ì • í›„
```swift
private let cellPadding: CGFloat = 15

...

private func configureUI() {
    contentView.backgroundColor = .white
        
    contentView.addSubview(stackView)
    stackView.addArrangedSubview(titleLabel)
    stackView.addArrangedSubview(contentLabel)
    stackView.addArrangedSubview(expirationLabel)
        
    NSLayoutConstraint.activate([
        stackView.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: cellPadding),
        stackView.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: -cellPadding),
        stackView.topAnchor.constraint(equalTo: contentView.topAnchor, constant: cellPadding),
        stackView.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: -cellPadding)
    ])
}
```


### 4ï¸âƒ£MVVM ë¦¬íŒ©í† ë§
MVVMì— ëŒ€í•œ ì •í™•í•œ ì´í•´ì™€ ì‚¬ìš©ì„ ìœ„í•´ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í–ˆìŠµë‹ˆë‹¤.
MVVMì˜ ê²½ìš° MVCì—ì„œ ViewControllerì˜ ì—­í• ì´ ë¹„ëŒ€í•´ì§ì„ ë°©ì§€í•˜ê³ , ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ViewModelì´ ì—¬ëŸ¬ ViewControllerì— ì‚¬ìš©ë˜ê³ , ê¸°ëŠ¥ì´ ë§ì•„ì§„ë‹¤ë©´, ViewModel ë˜í•œ MVCì˜ ViewControllerì²˜ëŸ¼ ë¹„ëŒ€í•´ì§ˆ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. 
ì´ì— ë‚´ë¦° ê²°ë¡ ì€ Viewcontroller í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ ViewModelì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ë©°, ViewModelì€ ìì‹ ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ Modelì—ì„œ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

- Model
```swift
class ScheduleManager {
    static let shared = ScheduleManager()
    
    @Published var todoSchedules: [Schedule] = []
    @Published var doingSchedules: [Schedule] = []
    @Published var doneSchedules: [Schedule] = []
    
    func addTodoSchedule( schedule: Schedule) {
        todoSchedules.append(schedule)
    }
    
    func sendSchedule(scheduleType: ScheduleType) -> AnyPublisher<[Schedule], Never> {
        switch scheduleType {
        case .todo:
            return $todoSchedules.eraseToAnyPublisher()
        case .doing:
            return $doingSchedules.eraseToAnyPublisher()
        case .done:
            return $doneSchedules.eraseToAnyPublisher()
        }
    }
    
    ...
}
```

- ViewModel
```swift
final class DoListViewModel {
    let scheduleManager = ScheduleManager.shared
    @Published var scheduleList: [Schedule] = []
    private var cancelBag: Set<AnyCancellable> = []
    
    init(scheduleType: ScheduleType) {
        fetchSchedule(scheduleType: scheduleType)
    }
    
    private func fetchSchedule(scheduleType: ScheduleType) {
        scheduleManager.sendSchedule(scheduleType: scheduleType).assign(to: \.scheduleList, on: self).store(in: &cancelBag)
    }
    
    func deleteSchedule(scheduleType: ScheduleType, index: Int) {
        scheduleManager.deleteSchedule(scheduleType: scheduleType, index: index)
    }
    
    func move(fromIndex: Int, from: ScheduleType, to: ScheduleType) {
        scheduleManager.move(fromIndex: fromIndex, from: from, to: to)
    }
}
```


## ì°¸ê³  ë§í¬
- [Swift Tutorial: An Introduction to the MVVM Design Pattern](https://adevait.com/ios/swift-tutorial-mvvm-design-pattern)
- [Swift Document UICollectionViewCompositionalLayout](https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayout)
- [Swift Document Published](https://developer.apple.com/documentation/combine/published)
- [Swift Document DatePicker](https://developer.apple.com/documentation/swiftui/datepicker)
- [Swift Document Combine](https://developer.apple.com/documentation/combine)

